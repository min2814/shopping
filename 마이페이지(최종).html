<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Account (with New Top Header)</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Noto+Sans+KR:wght@400;700;900&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://kit.fontawesome.com/5c3afda2cc.js"
      crossorigin="anonymous"
    ></script>
    <style>
      :root {
        --bg: #f5f7fb;
        --card: #fff;
        --line: #e9eef5;
        --text: #1c2230;
        --primary: #1357ff;
        --primary-700: #0f46cc;
        --shadow: 0 10px 30px rgba(24, 39, 75, 0.08);
        --radius: 16px;
        --muted: #9aa3b2;
        --topbar-h: 42px;
        --search-h: 72px;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        background: var(--bg);
        color: var(--text);
        font-family: Inter, "Noto Sans KR", system-ui, -apple-system, Segoe UI,
          Roboto, Arial, "Apple SD Gothic Neo", "Noto Sans", sans-serif;
        padding-top: calc(var(--topbar-h) + var(--search-h) + 16px);
        scroll-behavior: smooth;
      }

      /* ===== í—¤ë” ===== */
      .top-bar {
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 50;
        background: #1c1e26;
        color: #fff;
        height: var(--topbar-h);
        padding: 10px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
      }
      .top-left {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .delivery-toggle {
        display: inline-flex;
        align-items: center;
        background: #2b2f38;
        border-radius: 14px;
        overflow: hidden;
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.06),
          0 4px 10px rgba(0, 0, 0, 0.25);
      }
      .top-right {
        color: gray;
      }
      .top-right strong {
        color: #fff;
      }

      .search-section {
        position: fixed;
        top: var(--topbar-h);
        width: 100%;
        z-index: 40;
        background: #fff;
        border-bottom: 1px solid #ddd;
        height: var(--search-h);
        padding: 12px 20px;
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .catalog-btn {
        background: #077de2;
        color: #fff;
        border: none;
        height: 48px;
        padding: 0 22px;
        border-radius: 18px;
        cursor: pointer;
        font-weight: 700;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }
      .search-group {
        display: flex;
        align-items: center;
        gap: 0;
        flex: 1;
        min-width: 420px;
      }
      .search-pill {
        display: flex;
        align-items: center;
        flex: 1;
        background: #fff;
        border: 2px solid #2f80ed;
        border-right: 0;
        border-radius: 14px 0 0 18px;
        box-shadow: 0 1px 0 rgba(0, 0, 0, 0.02);
        overflow: hidden;
      }
      .category-select {
        appearance: none;
        height: 48px;
        flex: 0 0 240px;
        border: 0;
        border-right: 1px solid #e6e6ea;
        padding: 0 30px 0 16px;
        font-weight: 800;
        cursor: pointer;
        background: #fff
          url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>")
          no-repeat right 14px center/14px;
      }
      .search-input {
        height: 48px;
        flex: 1;
        border: 0;
        padding: 0 16px;
        outline: none;
        font-size: 15px;
      }
      .search-submit {
        height: 52px;
        padding: 0 18px;
        background: #2f80ed;
        color: #fff;
        border: 2px solid #2f80ed;
        border-left: 0;
        border-radius: 0 18px 18px 0;
        cursor: pointer;
        font-size: 16px;
      }
      .search-pill:focus-within {
        box-shadow: 0 0 0 3px rgba(47, 128, 237, 0.16);
      }

      .icons {
        display: flex;
        gap: 10px;
        margin-left: auto;
        position: relative;
      }
      .icon-box {
        width: 44px;
        height: 44px;
        border: 1px solid #e2e4ea;
        border-radius: 14px;
        display: flex;
        justify-content: center;
        align-items: center;
        background: #fff;
        cursor: pointer;
      }
      .icon-box i {
        font-size: 18px;
        color: #333;
      }
      .icon-box:hover i {
        color: #077de2;
        transition: color 0.2s;
      }

      .popover {
        position: absolute;
        top: 58px;
        min-width: 220px;
        background: #fff;
        border: 1px solid var(--line);
        border-radius: 12px;
        box-shadow: var(--shadow);
        padding: 12px;
        display: none;
        z-index: 60;
      }
      .popover.show {
        display: block;
      }
      .popover h4 {
        margin: 4px 0 8px;
        font-size: 14px;
      }
      .popover .row {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px;
        border-radius: 8px;
      }
      .popover .row:hover {
        background: #f6f8fe;
      }
      .popover .cta-mini {
        margin-top: 8px;
        width: 100%;
        height: 36px;
        border-radius: 8px;
        border: none;
        background: var(--primary);
        color: #fff;
        font-weight: 700;
        cursor: pointer;
      }
      .popover .cta-mini:hover {
        background: var(--primary-700);
      }

      /* ===== í˜ì´ì§€ ===== */
      .section-title {
        width: min(1400px, 98vw);
        margin: 0 auto 12px;
        padding: 0 2px;
      }
      .section-title h1 {
        margin: 0;
        font-size: 32px;
        line-height: 1.2;
        font-weight: 800;
        letter-spacing: -0.3px;
        color: #1c2230;
        text-align: left;
      }

      .page {
        width: min(1400px, 98vw);
        margin: 0 auto 40px;
        display: grid;
        grid-template-columns: 320px 1fr;
        gap: 24px;
      }
      .sidebar {
        background: #fff;
        border: 1px solid var(--line);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 14px 0;
        height: fit-content;
        position: sticky;
        top: calc(var(--topbar-h) + var(--search-h) + 16px);
      }
      .side-list {
        list-style: none;
        margin: 0;
        padding: 8px;
      }
      .side-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 14px;
        margin: 4px 8px;
        border-radius: 12px;
        color: #2b3240;
        cursor: pointer;
        user-select: none;
      }
      .side-item:hover {
        background: #f6f8fe;
      }
      .side-item.active {
        background: #f5f8ff;
        outline: 1px solid #e4ebff;
        color: #1141c7;
      }
      .side-sep {
        height: 1px;
        background: var(--line);
        margin: 10px 14px;
      }
      .signout {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 14px 18px;
        color: #d14747;
        font-weight: 600;
        margin-top: 4px;
        cursor: pointer;
      }

      .content {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .card {
        background: var(--card);
        border: 1px solid var(--line);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 24px;
        scroll-margin-top: calc(var(--topbar-h) + var(--search-h) + 16px);
      }
      .card-head {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 16px;
        gap: 12px;
      }
      .h2 {
        font-size: 22px;
        font-weight: 800;
      }

      .card.highlight {
        animation: pop 900ms ease;
        outline: 2px solid rgba(19, 87, 255, 0.25);
      }
      @keyframes pop {
        0% {
          transform: translateY(-2px);
          box-shadow: 0 12px 30px rgba(19, 87, 255, 0.15);
        }
        100% {
          transform: none;
          box-shadow: var(--shadow);
        }
      }

      .profile {
        margin-top: 16px;
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background-color: transparent;
        border: 2px solid black;
        margin-bottom: 16px;
        background-image: url("ìœ ì—°ìƒ.png");
        background-size: cover;
        background-position: center;
      }

      .label {
        font-size: 14px;
        color: #667085;
        margin: 8px 0 8px;
      }
      .date-field {
        display: inline-flex;
        align-items: center;
        height: 48px;
        background: #fff;
        border: 1px solid #e4e9f3;
        border-radius: 12px;
        overflow: hidden;
        max-width: 450px;
      }
      .date-field input[type="date"] {
        height: 100%;
        border: 0;
        outline: 0;
        padding: 0 12px;
        font-size: 15px;
        min-width: 200px;
        background: #fff;
        color: #111827;
      }
      .calendar-btn {
        width: 48px;
        height: 48px;
        border: 0;
        background: transparent;
        cursor: pointer;
        display: grid;
        place-items: center;
      }
      .calendar-btn:hover {
        background: #f6f8fe;
      }

      .link {
        color: #2563eb;
        text-decoration: none;
        font-weight: 600;
        font-size: 14px;
      }
      .link:hover {
        text-decoration: underline;
      }

      .btn-edit {
        appearance: none;
        border: 1px solid #d6def0;
        background: #f7f9ff;
        color: #1141c7;
        height: 36px;
        padding: 0 14px;
        border-radius: 10px;
        font-weight: 700;
        cursor: pointer;
      }
      .btn-edit:hover {
        background: #eef4ff;
      }

      .input,
      .select-display {
        height: 56px;
        border-radius: 12px;
        border: 1px solid #e4e9f3;
        background: #fff;
        display: flex;
        align-items: center;
        padding: 0 14px;
        box-shadow: inset 0 1px 0 rgba(17, 24, 39, 0.02);
        max-width: 450px;
      }
      .input {
        font-size: 16px;
        font-weight: 700;
        color: #111827;
      }
      .input .prefix {
        margin-right: 8px;
        color: #6b7280;
        font-weight: 800;
      }

      .select-wrap {
        position: relative;
        max-width: 450px;
      }
      .select-display {
        justify-content: space-between;
        cursor: pointer;
      }
      .select-placeholder {
        color: var(--muted);
        font-weight: 600;
      }
      .select-value {
        color: #111827;
        font-weight: 700;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }
      .chevron {
        width: 0;
        height: 0;
        border-left: 6px solid transparent;
        border-right: 6px solid transparent;
        border-top: 7px solid var(--muted);
        margin-left: 10px;
      }
      .select-menu {
        position: absolute;
        left: 0;
        right: 0;
        top: calc(100% + 8px);
        background: #fff;
        border: 1px solid var(--line);
        border-radius: 12px;
        box-shadow: var(--shadow);
        padding: 6px;
        display: none;
        z-index: 35;
      }
      .select-menu.show {
        display: block;
      }
      .select-item {
        padding: 10px 12px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        color: #1c2230;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .select-item.muted {
        color: var(--muted);
      }
      .select-item:hover {
        background: #f6f8fe;
      }

      .bank-logo {
        width: 20px;
        height: 20px;
        border-radius: 6px;
        display: grid;
        place-items: center;
        font-size: 11px;
        font-weight: 800;
        color: #fff;
        letter-spacing: 0.3px;
        flex: 0 0 20px;
      }
      .bank-logo.kb {
        background: #f0c400;
        color: #2b2b2b;
      }
      .bank-logo.shinhan {
        background: #003474;
      }
      .bank-logo.samsung {
        background: #1428a0;
      }
      .bank-logo.hyundai {
        background: #111;
      }
      .bank-logo.lotte {
        background: #ed1c24;
      }
      .bank-logo.woori {
        background: #1e6ed2;
      }
      .bank-logo.hana {
        background: #008485;
      }
      .bank-logo.nh {
        background: #00a64e;
      }

      /* ===== ì¹´ë“œ ìºëŸ¬ì…€ ===== */
      .wallet {
        margin-top: 16px;
        user-select: none;
      }

      .carousel {
        position: relative;
        padding: 8px 48px;
      }
      .carousel .nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 36px;
        height: 72px;
        border: 0;
        border-radius: 12px;
        background: #f3f5fb;
        color: #26324d;
        cursor: pointer;
        box-shadow: 0 3px 10px rgba(17, 24, 39, 0.08);
      }
      .carousel .nav:hover {
        background: #e9efff;
      }
      .carousel .prev {
        left: 4px;
      }
      .carousel .next {
        right: 4px;
      }

      .track {
        overflow: hidden;
      }
      .slides {
        display: flex;
        gap: 16px;
        align-items: stretch;
        transition: transform 0.35s ease;
      }
      .slide {
        flex: 0 0 74%;
        max-width: 640px;
        aspect-ratio: 16/9;
        border-radius: 20px;
        position: relative;
        background: #e9eef7;
        box-shadow: 0 10px 25px rgba(23, 45, 98, 0.1);
        transform: scale(0.92);
        opacity: 0.6;
        filter: saturate(0.75);
      }
      .slide.is-center {
        transform: scale(1);
        opacity: 1;
        filter: none;
      }
      .slide img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: inherit;
        display: block;
      }
      .slide .sub {
        position: absolute;
        left: 16px;
        bottom: 14px;
        font-size: 12px;
        padding: 6px 10px;
        border-radius: 10px;
        color: #fff;
        background: rgba(0, 0, 0, 0.22);
      }
      .dots {
        display: flex;
        justify-content: center;
        gap: 8px;
        margin-top: 10px;
      }
      .dot {
        width: 6px;
        height: 6px;
        border-radius: 999px;
        background: #c8d2e6;
        opacity: 0.85;
      }
      .dot.on {
        width: 20px;
        border-radius: 6px;
        background: #2e58ff;
        opacity: 1;
      }

      .cta {
        margin-top: 18px;
        max-width: 900px;
        height: 56px;
        border-radius: 12px;
        border: none;
        background: var(--primary);
        color: #fff;
        font-weight: 700;
        font-size: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 8px 20px rgba(19, 87, 255, 0.25);
        cursor: pointer;
      }
      .cta:hover {
        background: var(--primary-700);
      }
      .cta:active {
        transform: translateY(1px);
      }

      .no-focus {
        pointer-events: none;
        caret-color: transparent;
      }
      .disabled .select-display {
        background: #f8fafc;
        color: var(--muted);
        cursor: default;
      }
      .date-field.disabled {
        background: #f8fafc;
      }

      .add-inline-wrap {
        margin-top: 12px;
      }
      .btn-add-inline {
        height: 48px;
        padding: 0 16px;
        border-radius: 12px;
        border: 1px solid #d6def0;
        background: #f7f9ff;
        color: #1141c7;
        font-weight: 800;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
      }
      .btn-add-inline:hover {
        background: #eef4ff;
      }

      /* ì œê±° ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
      .btn-remove-inline {
        height: 48px;
        padding: 0 16px;
        border-radius: 12px;
        border: 1px solid #f0d3d3;
        background: #fff5f5;
        color: #c53030;
        font-weight: 800;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        margin-left: 8px;
      }
      .btn-remove-inline:hover {
        background: #ffecec;
      }
      .btn-remove-inline:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }

      /* ê³µì§€ì‚¬í•­(ì œëª©+ë³¸ë¬¸ ì•„ì½”ë””ì–¸) */
      .notice-item {
        border-bottom: 1px solid var(--line);
        padding: 12px 0;
      }
      .notice-title {
        font-weight: 800;
        color: #1357ff;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .notice-title .badge {
        font-size: 12px;
        background: #e9efff;
        color: #1141c7;
        padding: 2px 8px;
        border-radius: 999px;
      }
      .notice-body {
        display: none;
        margin-top: 8px;
        color: #374151;
        line-height: 1.6;
        font-size: 14px;
      }
      .notice-body.show {
        display: block;
      }

      @media (max-width: 720px) {
        .carousel {
          padding: 8px 36px;
        }
        .slide {
          flex-basis: 86%;
        }
      }
      @media (max-width: 960px) {
        .section-title {
          width: min(100%, 98vw);
          padding: 0 12px;
        }
        .page {
          grid-template-columns: 1fr;
          width: min(100%, 98vw);
        }
        .input,
        .select-wrap,
        .date-field {
          max-width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <!-- ===== ìƒë‹¨ë°” ===== -->
    <header class="top-bar">
      <div class="top-left">
        <div class="delivery-toggle" role="tablist" aria-label="ë°°ì†¡ ë°©ì‹">
          <button class="nav-btn active" role="tab" aria-selected="true">
            Delivery
          </button>
          <button class="nav-btn" role="tab" aria-selected="false">
            Pickup
          </button>
        </div>
        <span class="address">Select the delivery address</span>
        <span class="edit-icon" aria-hidden="true"
          ><i class="fa-regular fa-pen-to-square"></i
        ></span>
        <span class="delivery-time"
          >Nearest delivery <strong>today is 13:00-14:00</strong></span
        >
      </div>
      <div class="top-right">
        <span class="phone"
          ><strong>+ 8 800 555-35-35 </strong>Around the clock</span
        >
      </div>
    </header>

    <div class="search-section">
      <button class="catalog-btn" type="button">
        <i class="fa-regular fa-clone" aria-hidden="true"></i> Catalog
      </button>
      <div class="search-group">
        <div class="search-pill">
          <select class="category-select" aria-label="ì¹´í…Œê³ ë¦¬">
            <option>ALL CATEGORIES</option>
          </select>
          <input
            class="search-input"
            type="text"
            placeholder="Search in the market"
            aria-label="ê²€ìƒ‰ì–´ ì…ë ¥"
          />
        </div>
        <button class="search-submit" type="button" aria-label="ê²€ìƒ‰">
          <i class="fa-solid fa-magnifying-glass" aria-hidden="true"></i>
        </button>
      </div>
      <div class="icons" id="iconsWrap" aria-label="ë°”ë¡œê°€ê¸° ì•„ì´ì½˜">
        <div
          class="icon-box"
          id="heartBtn"
          role="button"
          tabindex="0"
          aria-label="ë°°ì†¡"
        >
          <i class="fa-solid fa-truck" aria-hidden="true"></i>
        </div>
        <div
          class="icon-box"
          id="cartBtn"
          role="button"
          tabindex="0"
          aria-label="ì°œ"
        >
          <i class="fa-solid fa-heart" aria-hidden="true"></i>
        </div>
        <div
          class="icon-box"
          id="userBtn"
          role="button"
          tabindex="0"
          aria-label="ì¥ë°”êµ¬ë‹ˆ"
        >
          <i class="fa-solid fa-cart-shopping" aria-hidden="true"></i>
        </div>
        <div
          class="icon-box"
          role="button"
          tabindex="0"
          aria-label="ë§ˆì´í˜ì´ì§€"
        >
          <i class="fa-solid fa-user" aria-hidden="true"></i>
        </div>

        <!-- Popovers -->
        <div class="popover" id="heartPop" role="dialog" aria-label="Wishlist">
          <h4>Wishlist</h4>
          <div class="row">í•˜íŠ¸ë¥¼ ëˆŒëŸ¬ ì°œí•œ ìƒí’ˆì´ ì—¬ê¸°ì— í‘œì‹œë¼ìš”.</div>
          <button class="cta-mini">ì°œ ìƒí’ˆ ë³´ëŸ¬ê°€ê¸°</button>
        </div>
        <div class="popover" id="cartPop" role="dialog" aria-label="Cart">
          <h4>Cart</h4>
          <div class="row">ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆì–´ìš”.</div>
          <button class="cta-mini">ì‡¼í•‘ ê³„ì†í•˜ê¸°</button>
        </div>
        <div class="popover" id="userPop" role="dialog" aria-label="Profile">
          <h4>Account</h4>
          <div class="row">í”„ë¡œí•„ ë³´ê¸°</div>
          <div class="row">ì£¼ë¬¸ ë‚´ì—­</div>
          <div class="row">ì„¤ì •</div>
          <button class="cta-mini">ë¡œê·¸ì•„ì›ƒ</button>
        </div>
      </div>
    </div>

    <!-- ===== í˜ì´ì§€ ì œëª© ===== -->
    <div class="section-title" aria-labelledby="page-title">
      <h1 id="page-title">My page</h1>
    </div>

    <!-- ===== ë³¸ë¬¸ ===== -->
    <main class="page">
      <!-- ì‚¬ì´ë“œë°” -->
      <aside class="sidebar" id="sidebar" aria-label="ë‚´ ê³„ì • ì„¹ì…˜ ëª©ë¡">
        <ul class="side-list">
          <li
            class="side-item active"
            role="button"
            aria-selected="true"
            tabindex="0"
            data-target="profileCard"
          >
            ë§ˆì´ í”„ë¡œí•„
          </li>
          <li
            class="side-item"
            role="button"
            aria-selected="false"
            tabindex="0"
            data-target="paymentsCard"
          >
            ê²°ì œê´€ë¦¬
          </li>
          <li
            class="side-item"
            role="button"
            aria-selected="false"
            tabindex="0"
            data-target="ordersCard"
          >
            ì£¼ë¬¸ë‚´ì—­
          </li>
          <li
            class="side-item"
            role="button"
            aria-selected="false"
            tabindex="0"
            data-target="csCard"
          >
            ì·¨ì†Œ/ë°˜í’ˆ/êµí™˜
          </li>
          <li
            class="side-item"
            role="button"
            aria-selected="false"
            tabindex="0"
            data-target="recentCard"
          >
            ìµœê·¼ ë³¸ ìƒí’ˆ
          </li>
          <li
            class="side-item"
            role="button"
            aria-selected="false"
            tabindex="0"
            data-target="noticeCard"
          >
            ê³µì§€ì‚¬í•­
          </li>
        </ul>
        <div class="side-sep"></div>
        <div class="signout" tabindex="0" data-id="signout">
          â‹&nbsp;&nbsp;Sign Out
        </div>
      </aside>

      <!-- ì»¨í…ì¸  -->
      <section class="content" id="content">
        <!-- === í”„ë¡œí•„ ì •ë³´ ì¹´ë“œ === -->
        <div class="card" id="profileCard">
          <div class="card-head">
            <div class="h2">í”„ë¡œí•„ ì •ë³´</div>
            <button
              type="button"
              id="editToggle"
              class="btn-edit"
              aria-pressed="false"
            >
              ìˆ˜ì •í•˜ê¸°
            </button>
          </div>

          <div class="profile" aria-label="í”„ë¡œí•„ ì´ë¯¸ì§€"></div>

          <div class="label">ì´ë¦„</div>
          <div class="input">
            <input
              id="nameField"
              type="text"
              value="ìœ ì—°ìƒ"
              aria-label="ì´ë¦„"
              class="no-focus"
              tabindex="-1"
              readonly
              aria-readonly="true"
              style="
                flex: 1;
                border: 0;
                outline: 0;
                height: 100%;
                font-size: 16px;
                font-weight: 700;
                color: #111827;
                background: transparent;
              "
            />
          </div>

          <div class="label" style="margin-top: 10px">ìƒë…„ì›”ì¼</div>
          <div class="date-field" id="birthWrap">
            <input type="date" id="birthDate" value="2001-09-18" disabled />
            <button
              type="button"
              class="calendar-btn"
              aria-label="ë‹¬ë ¥ ì—´ê¸°"
              disabled
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                width="20"
                height="20"
                aria-hidden="true"
              >
                <path
                  d="M7 2v2M17 2v2M3 9h18M4 7h16a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1z"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                />
              </svg>
            </button>
          </div>

          <div class="label" style="margin-top: 10px">ì„±ë³„</div>
          <div class="select-wrap disabled" id="genderSelect">
            <div
              class="select-display"
              id="genderDisplay"
              aria-haspopup="listbox"
              aria-expanded="false"
              aria-disabled="true"
              tabindex="-1"
            >
              <span class="select-value" id="genderText" data-value="male"
                >ë‚¨ì„±</span
              >
              <span class="chevron" aria-hidden="true"></span>
            </div>
            <div class="select-menu" id="genderMenu" role="listbox">
              <div class="select-item muted" data-value="">ì„ íƒí•˜ì„¸ìš”</div>
              <div class="select-item" data-value="female">ì—¬ì„±</div>
              <div class="select-item" data-value="male">ë‚¨ì„±</div>
              <div class="select-item" data-value="other">ê¸°íƒ€/ë²Œí‚¤ì§€ ì•ŠìŒ</div>
            </div>
          </div>

          <div class="label" style="margin-top: 10px">ì „í™”ë²ˆí˜¸</div>
          <div class="input" aria-live="polite">
            <span class="prefix">+82</span>
            <input
              id="phone"
              type="tel"
              inputmode="numeric"
              autocomplete="tel"
              placeholder="010-1234-5678"
              aria-label="ì „í™”ë²ˆí˜¸"
              value="010-4140-1166"
              class="no-focus"
              tabindex="-1"
              readonly
              aria-readonly="true"
              style="
                flex: 1;
                border: 0;
                outline: 0;
                height: 100%;
                font-size: 16px;
                font-weight: 700;
                color: #111827;
                background: transparent;
              "
            />
          </div>

          <div class="label" style="margin-top: 10px">ì´ë©”ì¼</div>
          <div class="input">
            <input
              id="email"
              type="email"
              autocomplete="email"
              placeholder="name@example.com"
              aria-label="ì´ë©”ì¼"
              value="yscome1159@naver.com "
              class="no-focus"
              tabindex="-1"
              readonly
              aria-readonly="true"
              style="
                flex: 1;
                border: 0;
                outline: 0;
                height: 100%;
                font-size: 16px;
                font-weight: 700;
                color: #111827;
                background: transparent;
              "
            />
          </div>
        </div>

        <!-- === ê²°ì œê´€ë¦¬ ì¹´ë“œ === -->
        <div class="card" id="paymentsCard">
          <div class="card-head">
            <div class="h2">ê²°ì œê´€ë¦¬</div>
            <a href="#" class="link" id="addCardBtn">+Add New Card</a>
          </div>

          <div class="label" style="margin-top: 10px">Bank</div>
          <div class="select-wrap" id="issuerSelect">
            <div
              class="select-display"
              id="issuerDisplay"
              aria-haspopup="listbox"
              aria-expanded="false"
              tabindex="0"
            >
              <span class="select-placeholder" id="issuerText"
                >ì¹´ë“œì‚¬ ì„ íƒ</span
              >
              <span class="chevron" aria-hidden="true"></span>
            </div>
            <div class="select-menu" id="issuerMenu" role="listbox">
              <div class="select-item muted" data-value="">
                <span
                  class="bank-logo"
                  style="background: #e5e7eb; color: #374151"
                  >â€“</span
                >ì¹´ë“œì‚¬ ì„ íƒ
              </div>
              <div class="select-item" data-value="KBêµ­ë¯¼ì¹´ë“œ">
                <span class="bank-logo kb">KB</span>KBêµ­ë¯¼ì¹´ë“œ
              </div>
              <div class="select-item" data-value="ì‹ í•œì¹´ë“œ">
                <span class="bank-logo shinhan">SH</span>ì‹ í•œì¹´ë“œ
              </div>
              <div class="select-item" data-value="ì‚¼ì„±ì¹´ë“œ">
                <span class="bank-logo samsung">SS</span>ì‚¼ì„±ì¹´ë“œ
              </div>
              <div class="select-item" data-value="í˜„ëŒ€ì¹´ë“œ">
                <span class="bank-logo hyundai">HD</span>í˜„ëŒ€ì¹´ë“œ
              </div>
              <div class="select-item" data-value="ë¡¯ë°ì¹´ë“œ">
                <span class="bank-logo lotte">LT</span>ë¡¯ë°ì¹´ë“œ
              </div>
              <div class="select-item" data-value="ìš°ë¦¬ì¹´ë“œ">
                <span class="bank-logo woori">WR</span>ìš°ë¦¬ì¹´ë“œ
              </div>
              <div class="select-item" data-value="í•˜ë‚˜ì¹´ë“œ">
                <span class="bank-logo hana">HN</span>í•˜ë‚˜ì¹´ë“œ
              </div>
              <div class="select-item" data-value="NHë†í˜‘ì¹´ë“œ">
                <span class="bank-logo nh">NH</span>NHë†í˜‘ì¹´ë“œ
              </div>
            </div>
          </div>

          <!-- â–¼ ì¶”ê°€: ê³„ì¢Œë²ˆí˜¸ ì…ë ¥ -->
          <div class="label" style="margin-top: 10px">ê³„ì¢Œë²ˆí˜¸</div>
          <div class="input">
            <input
              id="accountNumber"
              type="text"
              inputmode="numeric"
              autocomplete="off"
              placeholder="ì˜ˆ: 110-123-456789"
              aria-label="ê³„ì¢Œë²ˆí˜¸"
              style="
                flex: 1;
                border: 0;
                outline: 0;
                height: 100%;
                font-size: 16px;
                font-weight: 700;
                color: #111827;
                background: transparent;
              "
            />
          </div>

          <!-- â–¼ ì¶”ê°€: ì¸ë¼ì¸ 'ì¶”ê°€/ì œê±°' ë²„íŠ¼ -->
          <div class="add-inline-wrap">
            <button
              type="button"
              class="btn-add-inline"
              id="addInlineBtn"
              aria-label="ì¹´ë“œ ì¶”ê°€"
            >
              <i class="fa-solid fa-plus" aria-hidden="true"></i> ì¶”ê°€
            </button>
            <button
              type="button"
              class="btn-remove-inline"
              id="removeInlineBtn"
              aria-label="ì¹´ë“œ ì œê±°"
            >
              <i class="fa-solid fa-minus" aria-hidden="true"></i> ì œê±°
            </button>
          </div>

          <!-- â–¼ ì¹´ë“œ ìºëŸ¬ì…€ -->
          <div class="wallet" id="wallet">
            <div
              class="carousel"
              id="cardCarousel"
              tabindex="0"
              aria-roledescription="carousel"
            >
              <button class="nav prev" aria-label="ì´ì „ ì¹´ë“œ">&lt;</button>
              <div class="track"><div class="slides" id="slides"></div></div>
              <button class="nav next" aria-label="ë‹¤ìŒ ì¹´ë“œ">&gt;</button>
            </div>
            <div class="dots" id="cardDots" aria-label="í˜ì´ì§€ í‘œì‹œì "></div>
          </div>
        </div>

        <!-- === ì„¹ì…˜ë“¤ === -->
        <div class="card" id="ordersCard">
          <div class="card-head"><div class="h2">ì£¼ë¬¸ë‚´ì—­</div></div>
          <p>ìµœê·¼ ì£¼ë¬¸ë‚´ì—­ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
        </div>
        <div class="card" id="csCard">
          <div class="card-head"><div class="h2">ì·¨ì†Œ/ë°˜í’ˆ/êµí™˜</div></div>
          <p>ì·¨ì†Œ/ë°˜í’ˆ/êµí™˜ ì§„í–‰ í˜„í™©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>
        <div class="card" id="recentCard">
          <div class="card-head"><div class="h2">ìµœê·¼ ë³¸ ìƒí’ˆ</div></div>
          <p>ìµœê·¼ í™•ì¸í•œ ìƒí’ˆ ëª©ë¡ì…ë‹ˆë‹¤.</p>
        </div>

        <!-- === ê³µì§€ì‚¬í•­(ì œëª©+ë³¸ë¬¸ ì•„ì½”ë””ì–¸) === -->
        <div class="card" id="noticeCard">
          <div class="card-head"><div class="h2">ê³µì§€ì‚¬í•­</div></div>

          <div class="notice-item">
            <div
              class="notice-title"
              role="button"
              tabindex="0"
              aria-expanded="false"
            >
              <span class="badge">NEW</span>
              [ê³µì§€ì‚¬í•­] ì´ë²ˆì£¼ ì—¬ë¦„íœ´ê°€ 80% ì„¸ì¼!
            </div>
            <div class="notice-body" aria-hidden="true">
              ì•ˆë…•í•˜ì„¸ìš” ê³ ê°ë‹˜ ğŸ˜Š<br />
              ì´ë²ˆ ì£¼ ì—¬ë¦„íœ´ê°€ë¥¼ ë§ì•„ ì „ ìƒí’ˆ
              <strong>ìµœëŒ€ 80% ì„¸ì¼</strong> ì´ë²¤íŠ¸ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.<br />
              <br />
              â–¸ ê¸°ê°„: <b>8ì›” 20ì¼ ~ 8ì›” 27ì¼</b><br />
              â–¸ ëŒ€ìƒ: ì „ ì¹´í…Œê³ ë¦¬(ì¼ë¶€ í’ˆëª© ì œì™¸)<br />
              â–¸ ìœ ì˜ì‚¬í•­: ì¿ í°/í¬ì¸íŠ¸ ì¤‘ë³µ ì ìš©ì€ ê²°ì œ ë‹¨ê³„ì—ì„œ í™•ì¸í•´
              ì£¼ì„¸ìš”.<br />
              <br />
              ë§ì€ ê´€ì‹¬ê³¼ ì°¸ì—¬ ë¶€íƒë“œë¦½ë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!
            </div>
          </div>
        </div>
      </section>
    </main>

    <script>
      /* ===== ìƒë‹¨ ì•„ì´ì½˜ íŒì˜¤ë²„ ===== */
      const btns = {
        heart: {
          btn: document.getElementById("heartBtn"),
          pop: document.getElementById("heartPop"),
        },
        cart: {
          btn: document.getElementById("cartBtn"),
          pop: document.getElementById("cartPop"),
        },
        user: {
          btn: document.getElementById("userBtn"),
          pop: document.getElementById("userPop"),
        },
      };
      function positionPopover(btn, pop) {
        const r = btn.getBoundingClientRect();
        const parent =
          btn.offsetParent ||
          document.getElementById("iconsWrap") ||
          document.body;
        const parentR = parent.getBoundingClientRect();
        pop.style.left = r.left - parentR.left - 90 + r.width / 2 + "px";
        pop.style.top = r.bottom - parentR.top + 8 + "px";
      }
      function closeAllPopovers() {
        Object.values(btns).forEach(({ btn, pop }) => {
          pop.classList.remove("show");
          btn && btn.setAttribute("aria-expanded", "false");
        });
      }
      function togglePopover(key) {
        const { btn, pop } = btns[key];
        const willOpen = !pop.classList.contains("show");
        closeAllPopovers();
        if (willOpen) {
          positionPopover(btn, pop);
          pop.classList.add("show");
          btn.setAttribute("aria-expanded", "true");
        }
      }
      Object.entries(btns).forEach(([key, { btn }]) => {
        if (!btn) return;
        btn.addEventListener("click", () => togglePopover(key));
        btn.addEventListener("keydown", (e) => {
          if (["ArrowDown", "Enter", " "].includes(e.key)) {
            e.preventDefault();
            togglePopover(key);
          }
        });
      });

      /* ===== ì¹´ë“œì‚¬ ì„ íƒ (ë¡œê³  í‘œì‹œ) ===== */
      const issuerWrap = document.getElementById("issuerSelect");
      const issuerDisp = document.getElementById("issuerDisplay");
      const issuerTextEl = document.getElementById("issuerText");
      const issuerMenu = document.getElementById("issuerMenu");

      function logoHTML(bankName) {
        const map = {
          KBêµ­ë¯¼ì¹´ë“œ: { cls: "kb", txt: "KB" },
          ì‹ í•œì¹´ë“œ: { cls: "shinhan", txt: "SH" },
          ì‚¼ì„±ì¹´ë“œ: { cls: "samsung", txt: "SS" },
          í˜„ëŒ€ì¹´ë“œ: { cls: "hyundai", txt: "HD" },
          ë¡¯ë°ì¹´ë“œ: { cls: "lotte", txt: "LT" },
          ìš°ë¦¬ì¹´ë“œ: { cls: "woori", txt: "WR" },
          í•˜ë‚˜ì¹´ë“œ: { cls: "hana", txt: "HN" },
          NHë†í˜‘ì¹´ë“œ: { cls: "nh", txt: "NH" },
        };
        const item = map[bankName];
        if (!item) return "";
        return `<span class="bank-logo ${item.cls}">${item.txt}</span><span>${bankName}</span>`;
      }
      function toggleIssuerMenu(force) {
        const willOpen =
          typeof force === "boolean"
            ? force
            : !issuerMenu.classList.contains("show");
        if (willOpen) {
          issuerMenu.classList.add("show");
          issuerDisp.setAttribute("aria-expanded", "true");
        } else {
          issuerMenu.classList.remove("show");
          issuerDisp.setAttribute("aria-expanded", "false");
        }
      }
      issuerDisp.addEventListener("click", () => toggleIssuerMenu());
      issuerDisp.addEventListener("keydown", (e) => {
        if (["Enter", " "].includes(e.key)) {
          e.preventDefault();
          toggleIssuerMenu();
        }
      });
      issuerMenu.addEventListener("click", (e) => {
        const item = e.target.closest(".select-item");
        if (!item) return;
        const val = item.dataset.value || "";
        if (val) {
          issuerTextEl.className = "select-value";
          issuerTextEl.innerHTML = logoHTML(val);
          issuerTextEl.dataset.value = val; // â˜… ì„ íƒí•œ ì¹´ë“œì‚¬ ì €ì¥
        } else {
          issuerTextEl.textContent = "ì¹´ë“œì‚¬ ì„ íƒ";
          issuerTextEl.className = "select-placeholder";
          issuerTextEl.dataset.value = "";
        }
        toggleIssuerMenu(false);
      });

      /* ===== ì‚¬ì´ë“œë°”: ì •í™• ìŠ¤í¬ë¡¤ + í•´ì‹œ/ë’¤ë¡œê°€ê¸° + í•˜ì´ë¼ì´íŠ¸ ===== */
      const sidebar = document.getElementById("sidebar");
      const sideItems = Array.from(
        sidebar.querySelectorAll(".side-item[data-target]")
      );
      const sections = sideItems
        .map((li) => document.getElementById(li.dataset.target))
        .filter(Boolean);

      // CSS ë³€ìˆ˜(px) -> ìˆ˜ì¹˜í™”
      const px = (v) => Number(String(v).trim().replace("px", "")) || 0;
      const rootStyle = getComputedStyle(document.documentElement);
      const headerOffset =
        px(rootStyle.getPropertyValue("--topbar-h")) +
        px(rootStyle.getPropertyValue("--search-h")) +
        16; // body padding-top ì—¬ìœ ì¹˜

      function activateById(id) {
        sideItems.forEach((li) => {
          const on = li.dataset.target === id;
          li.classList.toggle("active", on);
          li.setAttribute("aria-selected", String(on));
        });
      }

      function scrollToSection(id, pushHash = true) {
        const target = document.getElementById(id);
        if (!target) return;

        const rect = target.getBoundingClientRect();
        const absoluteTop = window.pageYOffset + rect.top;
        const y = Math.max(0, absoluteTop - headerOffset);

        window.scrollTo({ top: y, behavior: "smooth" });
        activateById(id);

        if (pushHash) history.pushState(null, "", `#${id}`);
        // ì¹´ë“œ ê°•ì¡° íš¨ê³¼ (ì‹œê°ì  í”¼ë“œë°±)
        target.classList.add("highlight");
        setTimeout(() => target.classList.remove("highlight"), 900);
      }

      // í´ë¦­/í‚¤ë³´ë“œë¡œ ì´ë™
      sidebar.addEventListener("click", (e) => {
        const item = e.target.closest(".side-item[data-target]");
        if (!item) return;
        scrollToSection(item.dataset.target, true);
      });
      sidebar.addEventListener("keydown", (e) => {
        const item = e.target.closest(".side-item[data-target]");
        if (!item) return;
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          scrollToSection(item.dataset.target, true);
        }
      });

      // ìŠ¤í¬ë¡¤ ì‹œ ê°€ì‹œ ì˜ì—­ì— ë§ì¶° í™œì„± ìƒíƒœ ë™ê¸°í™”
      const io = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) activateById(entry.target.id);
          });
        },
        {
          root: null,
          rootMargin: `-${headerOffset + 10}px 0px -60% 0px`,
          threshold: 0.01,
        }
      );
      sections.forEach((sec) => io.observe(sec));

      // í•´ì‹œë¡œ ì§„ì… ì‹œ í•´ë‹¹ ì„¹ì…˜ìœ¼ë¡œ ë³´ì • ìŠ¤í¬ë¡¤
      window.addEventListener("load", () => {
        const id = location.hash?.replace("#", "");
        if (id && document.getElementById(id)) {
          // ì•½ê°„ ë”œë ˆì´ í›„ ìŠ¤í¬ë¡¤(ë ˆì´ì•„ì›ƒ ì•ˆì •í™”)
          setTimeout(() => scrollToSection(id, false), 0);
        }
      });
      // ë’¤ë¡œê°€ê¸°/ì•ìœ¼ë¡œê°€ê¸°
      window.addEventListener("popstate", () => {
        const id = location.hash?.replace("#", "") || sections[0]?.id;
        if (id) scrollToSection(id, false);
      });

      /* ===== ì¹´ë“œ ì´ë¯¸ì§€(SVG) ìƒì„±ê¸° ===== */
      function cardSVGData({ bank, last4, theme }) {
        const themes = {
          toss: {
            c1: "#1673ff",
            c2: "#0b59ff",
            text: "#ffffff",
            chip: "#f1f5ff",
          },
          nh: {
            c1: "#00a64e",
            c2: "#0f9a44",
            text: "#ffffff",
            chip: "#e6ffe6",
          },
          kb: {
            c1: "#f0c400",
            c2: "#f0b400",
            text: "#273238",
            chip: "#fff6d7",
          },
          shinhan: {
            c1: "#003474",
            c2: "#0b3b94",
            text: "#ffffff",
            chip: "#e2ecff",
          },
          custom: {
            c1: "#6b7cff",
            c2: "#5a67d8",
            text: "#ffffff",
            chip: "#f3f4ff",
          },
        };
        const t = themes[theme] || themes.custom;
        const svg = `
<svg xmlns="http://www.w3.org/2000/svg" width="680" height="420" viewBox="0 0 680 420">
  <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
    <stop offset="0" stop-color="${t.c1}"/><stop offset="1" stop-color="${t.c2}"/>
  </linearGradient></defs>
  <rect width="680" height="420" rx="28" fill="url(#g)"/>
  <rect x="48" y="78" width="72" height="52" rx="10" fill="${t.chip}" opacity="0.9"/>
  <circle cx="565" cy="94" r="6" fill="${t.text}" opacity="0.95"/>
  <text x="48" y="170" fill="${t.text}" font-family="Inter,'Noto Sans KR',sans-serif" font-size="28" font-weight="700" opacity="0.9">bank</text>
  <text x="48" y="238" fill="${t.text}" font-family="Inter,'Noto Sans KR',sans-serif" font-size="38" font-weight="800">${bank}</text>
  <text x="48" y="300" fill="${t.text}" font-family="Inter,monospace" font-size="26" letter-spacing="6">â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ ${last4}</text>
  <text x="632" y="356" fill="${t.text}" font-family="Inter,sans-serif" font-size="14" opacity="0.8" text-anchor="end">${bank}</text>
</svg>`;
        return "data:image/svg+xml;utf8," + encodeURIComponent(svg);
      }

      /* ===== ê²°ì œ ì¹´ë“œ ìºëŸ¬ì…€ ===== */
      const cards = [
        { bank: "í† ìŠ¤ë±…í¬", last4: "4821", theme: "toss" },
        { bank: "NHì±„ì›€", last4: "1103", theme: "nh" },
        { bank: "KBêµ­ë¯¼", last4: "2878", theme: "kb" },
        { bank: "ì‹ í•œ", last4: "9042", theme: "shinhan" },
      ];
      const slidesEl = document.getElementById("slides");
      const dotsEl = document.getElementById("cardDots");
      const prevBtn = document.querySelector("#cardCarousel .prev");
      const nextBtn = document.querySelector("#cardCarousel .next");
      let current = 0;

      function updateNavDisabled() {
        const hasCards = cards.length > 0;
        prevBtn.disabled = !hasCards || current <= 0;
        nextBtn.disabled = !hasCards || current >= cards.length - 1;
        const removeBtn = document.getElementById("removeInlineBtn");
        if (removeBtn) removeBtn.disabled = !hasCards;
      }

      function renderSlides() {
        slidesEl.innerHTML = "";
        cards.forEach((c, idx) => {
          const wrap = document.createElement("div");
          wrap.className = "slide" + (idx === current ? " is-center" : "");
          wrap.innerHTML =
            `<img alt="${c.bank} ì¹´ë“œ **** ${c.last4}" src="${cardSVGData(
              c
            )}"/>` + `<div class="sub">${c.bank} â€¢â€¢â€¢â€¢ ${c.last4}</div>`;
          wrap.addEventListener("click", () => goTo(idx));
          slidesEl.appendChild(wrap);
        });
        dotsEl.innerHTML = "";
        cards.forEach((_, idx) => {
          const d = document.createElement("div");
          d.className = "dot" + (idx === current ? " on" : "");
          d.addEventListener("click", () => goTo(idx));
          dotsEl.appendChild(d);
        });
        updateTransform();
        updateNavDisabled();
      }

      // â˜…â˜…â˜… ì„¼í„° ì •ë ¬ ë¡œì§ â˜…â˜…â˜…
      function updateTransform() {
        const track = document.querySelector("#cardCarousel .track");
        const slides = slidesEl.querySelectorAll(".slide");
        if (!slides.length) return;

        const first = slides[0].getBoundingClientRect();
        const trackW = track.getBoundingClientRect().width;
        const slideW = first.width;

        // ì‹¤ì œ gap ê³„ì‚° (ë‘ ì¥ ì´ìƒì¼ ë•Œ), ì—†ìœ¼ë©´ 16px
        let gap = 16;
        if (slides.length >= 2) {
          const s0 = slides[0].getBoundingClientRect();
          const s1 = slides[1].getBoundingClientRect();
          gap = Math.max(0, s1.left - s0.right);
        }
        const step = slideW + gap;
        const totalW = slideW * slides.length + gap * (slides.length - 1);

        // current ìŠ¬ë¼ì´ë“œ ì¤‘ì‹¬ì„ íŠ¸ë™ ì¤‘ì•™ì— ë§ì¶”ëŠ” ì˜¤í”„ì…‹
        const targetCenter = current * step + slideW / 2;
        let offset = targetCenter - trackW / 2;

        // ê°€ì¥ìë¦¬ í´ë¨í”„
        const maxOffset = Math.max(0, totalW - trackW);
        if (offset < 0) offset = 0;
        if (offset > maxOffset) offset = maxOffset;

        slidesEl.style.transform = `translateX(${-offset}px)`;

        // ìƒíƒœ ì—…ë°ì´íŠ¸
        slidesEl
          .querySelectorAll(".slide")
          .forEach((s, i) => s.classList.toggle("is-center", i === current));
        dotsEl
          .querySelectorAll(".dot")
          .forEach((d, i) => d.classList.toggle("on", i === current));
      }

      function goTo(idx) {
        current = Math.max(0, Math.min(cards.length - 1, idx));
        updateTransform();
        updateNavDisabled();
      }
      prevBtn.addEventListener("click", () => goTo(current - 1));
      nextBtn.addEventListener("click", () => goTo(current + 1));
      document
        .getElementById("cardCarousel")
        .addEventListener("keydown", (e) => {
          if (e.key === "ArrowLeft") goTo(current - 1);
          if (e.key === "ArrowRight") goTo(current + 1);
        });
      window.addEventListener("resize", updateTransform);
      renderSlides();

      // ê³µí†µ ì¶”ê°€ í•¨ìˆ˜
      function addCard(bankName, last4, theme = "custom") {
        const bank = bankName || "ìƒˆ ì¹´ë“œ";
        const l4 =
          (last4 && String(last4).padStart(4, "0").slice(-4)) ||
          String(Math.floor(1000 + Math.random() * 9000));
        cards.push({ bank, last4: l4, theme });
        current = cards.length - 1; // ë§ˆì§€ë§‰(ìƒˆ ì¹´ë“œ)ìœ¼ë¡œ í¬ì»¤ìŠ¤
        renderSlides(); // ë Œë” í›„ ì¤‘ì•™ ì •ë ¬ + ë²„íŠ¼ ìƒíƒœ ê°±ì‹ 
      }

      // ì¹´ë“œì‚¬ëª… -> í…Œë§ˆ ë§¤í•‘
      function themeByIssuer(issuer) {
        if (!issuer) return "custom";
        if (issuer.includes("ë†í˜‘") || issuer.includes("NH")) return "nh";
        if (issuer.includes("KB")) return "kb";
        if (issuer.includes("ì‹ í•œ")) return "shinhan";
        if (issuer.includes("í† ìŠ¤")) return "toss";
        return "custom";
      }

      // í¼ ê¸°ë°˜ìœ¼ë¡œ ì¹´ë“œ ì¶”ê°€
      const accountInput = document.getElementById("accountNumber");
      function addNewCardFromForm() {
        const issuer = issuerTextEl.dataset.value || ""; // ì„ íƒí•œ ì¹´ë“œì‚¬
        const accNums = (accountInput.value || "").replace(/\D/g, "");
        const last4 = accNums.slice(-4);
        const theme = themeByIssuer(issuer);
        const bankName = issuer ? issuer.replace(/ì¹´ë“œ$/, "") : "ìƒˆ ì¹´ë“œ";
        addCard(bankName, last4, theme);
      }

      // í—¤ë” ë§í¬: ëœë¤ ìƒˆ ì¹´ë“œ
      document.getElementById("addCardBtn").addEventListener("click", (e) => {
        e.preventDefault();
        const last4 = String(Math.floor(1000 + Math.random() * 9000));
        addCard("ìƒˆ ì¹´ë“œ", last4, "custom");
      });

      // ì¸ë¼ì¸ 'ì¶”ê°€' ë²„íŠ¼: ì„ íƒê°’ ê¸°ë°˜ ì¶”ê°€
      document
        .getElementById("addInlineBtn")
        .addEventListener("click", addNewCardFromForm);

      // â˜… í˜„ì¬ ì¹´ë“œ ì œê±° ê¸°ëŠ¥
      function removeCurrentCard() {
        if (cards.length === 0) return;

        // í˜„ì¬ ì¹´ë“œ ì‚­ì œ
        cards.splice(current, 1);

        // ì¸ë±ìŠ¤ ë³´ì •
        if (current >= cards.length) current = Math.max(0, cards.length - 1);

        // ë Œë”ë§ ê°±ì‹ 
        slidesEl.innerHTML = "";
        dotsEl.innerHTML = "";

        if (cards.length === 0) {
          // ë¹ˆ ìƒíƒœ ì²˜ë¦¬ (ì„ íƒì‚¬í•­)
          slidesEl.innerHTML = `<div style="padding:24px;text-align:center;width:100%;">ë“±ë¡ëœ ì¹´ë“œê°€ ì—†ìŠµë‹ˆë‹¤.</div>`;
          slidesEl.style.transform = `translateX(0px)`;
          updateNavDisabled();
          return;
        }

        renderSlides(); // ë‚´ë¶€ì—ì„œ updateTransform + updateNavDisabled í˜¸ì¶œ
      }

      // ì œê±° ë²„íŠ¼ ì—°ê²°
      document
        .getElementById("removeInlineBtn")
        .addEventListener("click", removeCurrentCard);

      // Withdraw ë²„íŠ¼(ë°ëª¨) - ì¡´ì¬í•  ë•Œë§Œ ì—°ê²°
      const withdrawBtn = document.getElementById("withdrawBtn");
      if (withdrawBtn) {
        withdrawBtn.addEventListener("click", () => {
          const c = cards[current];
          alert(`Withdrawing to card: ${c.bank} **** ${c.last4} âœ…`);
        });
      }

      /* ===== ë°”ê¹¥ í´ë¦­/ESC ë‹«ê¸° ===== */
      document.addEventListener("click", (e) => {
        const anyOpen = Object.values(btns).some(({ pop }) =>
          pop.classList.contains("show")
        );
        if (anyOpen) {
          const inside = Object.values(btns).some(
            ({ btn, pop }) =>
              pop.contains(e.target) || (btn && btn.contains(e.target))
          );
          if (!inside) closeAllPopovers();
        }
        if (
          issuerMenu.classList.contains("show") &&
          !issuerWrap.contains(e.target)
        )
          toggleIssuerMenu(false);
      });
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          closeAllPopovers();
          toggleIssuerMenu(false);
        }
      });

      /* ===== í¼/í¸ì§‘ ===== */
      const emailInput = document.getElementById("email");
      if (emailInput) {
        emailInput.addEventListener("blur", () => {
          if (emailInput.value && !emailInput.checkValidity())
            emailInput.reportValidity();
        });
      }
      const nameField = document.getElementById("nameField");
      const phoneInput = document.getElementById("phone");
      const birthInput = document.getElementById("birthDate");
      const birthWrap = document.getElementById("birthWrap");
      const calendarBtns = document.querySelectorAll(".calendar-btn");
      const editBtn = document.getElementById("editToggle");
      const genderWrap = document.getElementById("genderSelect");
      const genderDisp = document.getElementById("genderDisplay");
      const genderTextEl = document.getElementById("genderText");
      const genderMenu = document.getElementById("genderMenu");
      let editing = false;

      function setReadOnly(el, ro) {
        el.readOnly = ro;
        el.setAttribute("aria-readonly", String(ro));
        el.classList.toggle("no-focus", ro);
        el.tabIndex = ro ? -1 : 0;
      }
      function toggleGenderMenu(force) {
        const willOpen =
          typeof force === "boolean"
            ? force
            : !genderMenu.classList.contains("show");
        if (willOpen) {
          genderMenu.classList.add("show");
          genderDisp.setAttribute("aria-expanded", "true");
        } else {
          genderMenu.classList.remove("show");
          genderDisp.setAttribute("aria-expanded", "false");
        }
      }
      function setEditing(on) {
        editing = on;
        editBtn.textContent = on ? "ì €ì¥" : "ìˆ˜ì •í•˜ê¸°";
        editBtn.setAttribute("aria-pressed", String(on));
        setReadOnly(nameField, !on);
        setReadOnly(phoneInput, !on);
        setReadOnly(emailInput, !on);
        birthInput.disabled = !on;
        calendarBtns.forEach((btn) => (btn.disabled = !on));
        birthWrap.classList.toggle("disabled", !on);
        genderDisp.setAttribute("aria-disabled", String(!on));
        genderWrap.classList.toggle("disabled", !on);
        genderDisp.tabIndex = on ? 0 : -1;
        if (!on) toggleGenderMenu(false);
        if (on) {
          nameField.focus();
          nameField.setSelectionRange(
            nameField.value.length,
            nameField.value.length
          );
        }
      }
      editBtn.addEventListener("click", () => {
        if (editing && emailInput.value && !emailInput.checkValidity()) {
          emailInput.reportValidity();
          return;
        }
        if (editing) {
          alert("í”„ë¡œí•„ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. âœ…");
        }
        setEditing(!editing);
      });
      document.querySelectorAll(".calendar-btn").forEach((btn) =>
        btn.addEventListener("click", () => {
          if (!editing) return;
          if (typeof birthInput.showPicker === "function")
            birthInput.showPicker();
          else birthInput.focus();
        })
      );

      // ì „í™”ë²ˆí˜¸ í¬ë§·
      if (phoneInput) {
        phoneInput.addEventListener("input", () => {
          if (phoneInput.readOnly) return;
          let v = phoneInput.value.replace(/[^\d]/g, "").slice(0, 11);
          if (v.startsWith("010")) {
            if (v.length > 7)
              v = v
                .replace(/(\d{3})(\d{4})(\d{0,4}).*/, "$1-$2-$3")
                .replace(/-$/, "");
            else if (v.length > 3) v = v.replace(/(\d{3})(\d{0,4})/, "$1-$2");
          } else {
            if (v.length > 7)
              v = v
                .replace(/(\d{3})(\d{3,4})(\d{0,4}).*/, "$1-$2-$3")
                .replace(/-$/, "");
            else if (v.length > 3) v = v.replace(/(\d{3})(\d{0,4})/, "$1-$2");
          }
          phoneInput.value = v;
        });
      }

      // ì´ˆê¸° ìƒíƒœ
      setEditing(false);

      /* === ê³µì§€ì‚¬í•­ í† ê¸€ === */
      document.querySelectorAll(".notice-title").forEach((title) => {
        title.addEventListener("click", () => {
          const body = title.nextElementSibling;
          const willShow = !body.classList.contains("show");
          document.querySelectorAll(".notice-body").forEach((b) => {
            b.classList.remove("show");
            b.setAttribute("aria-hidden", "true");
          });
          document
            .querySelectorAll(".notice-title")
            .forEach((t) => t.setAttribute("aria-expanded", "false"));
          if (willShow) {
            body.classList.add("show");
            body.setAttribute("aria-hidden", "false");
            title.setAttribute("aria-expanded", "true");
          }
        });
        title.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            title.click();
          }
        });
      });
    </script>
  </body>
</html>
